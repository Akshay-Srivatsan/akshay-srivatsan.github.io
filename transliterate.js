let brahmic_map = [
  {
    "Devanagari": "à¥",
    "Grantha": "ğ‘",
    "Brahmi": "à¥",
    "Tamil": "à¯",
    "ISO": "à¥"
  },
  {
    "Devanagari": "â—Œà¤€",
    "Grantha": "â—Œğ‘Œ€",
    "Brahmi": "â—Œğ‘€€",
    "Tamil": "â—Œà®‚",
    "ISO": "mÌ"
  },
  {
    "Devanagari": "â—Œà¤",
    "Grantha": "â—Œğ‘Œ",
    "Brahmi": "â—Œğ‘€€",
    "Tamil": "â—Œà®‚",
    "ISO": "mÌ"
  },
  {
    "Devanagari": "â—Œà¤‚",
    "Grantha": "â—Œğ‘Œ‚",
    "Brahmi": "â—Œğ‘€",
    "Tamil": "â—Œà®‚",
    "ISO": "á¹"
  },
  {
    "Devanagari": "â—Œà¤ƒ",
    "Grantha": "â—Œğ‘Œƒ",
    "Brahmi": "â—Œğ‘€‚",
    "Tamil": "â—Œğ‘Œƒ",
    "ISO": "á¸¥"
  },
  {
    "Devanagari": "â—Œà¤¼",
    "Grantha": "â—Œğ‘Œ¼",
    "Brahmi": "",
    "Tamil": "",
    "ISO": ""
  },
  {
    "Devanagari": "à¥¤",
    "Grantha": "à¥¤",
    "Brahmi": "ğ‘‡",
    "Tamil": ".",
    "ISO": "."
  },
  {
    "Devanagari": "à¥¥",
    "Grantha": "à¥¥",
    "Brahmi": "ğ‘ˆ",
    "Tamil": ".",
    "ISO": "."
  },
  {
    "Devanagari": "à¥°",
    "Grantha": ".",
    "Brahmi": "ğ‘‰",
    "Tamil": ".",
    "ISO": "."
  },
  {
    "Devanagari": "à¥±",
    "Grantha": "-",
    "Brahmi": "ğ‘‹",
    "Tamil": "-",
    "ISO": "-"
  },
  {
    "Devanagari": "à¤½",
    "Grantha": "ğ‘Œ½",
    "Brahmi": "ğ‘€…",
    "Tamil": "à®…",
    "ISO": "'"
  },
  {
    "Devanagari": "à¤…",
    "Grantha": "ğ‘Œ…",
    "Brahmi": "ğ‘€…",
    "Tamil": "à®…",
    "ISO": "a"
  },
  {
    "Devanagari": "à¤„",
    "Grantha": "ğ‘Œ…",
    "Brahmi": "ğ‘€…",
    "Tamil": "à®…",
    "ISO": "a"
  },
  {
    "Devanagari": "à¤†",
    "Grantha": "ğ‘Œ†",
    "Brahmi": "ğ‘€†",
    "Tamil": "à®†",
    "ISO": "Ä"
  },
  {
    "Devanagari": "à¤‡",
    "Grantha": "ğ‘Œ‡",
    "Brahmi": "ğ‘€‡",
    "Tamil": "à®‡",
    "ISO": "i"
  },
  {
    "Devanagari": "à¤ˆ",
    "Grantha": "ğ‘Œˆ",
    "Brahmi": "ğ‘€ˆ",
    "Tamil": "à®ˆ",
    "ISO": "Ä«"
  },
  {
    "Devanagari": "à¤‰",
    "Grantha": "ğ‘Œ‰",
    "Brahmi": "ğ‘€‰",
    "Tamil": "à®‰",
    "ISO": "u"
  },
  {
    "Devanagari": "à¤Š",
    "Grantha": "ğ‘ŒŠ",
    "Brahmi": "ğ‘€Š",
    "Tamil": "à®Š",
    "ISO": "Å«"
  },
  {
    "Devanagari": "à¤‹",
    "Grantha": "ğ‘Œ‹",
    "Brahmi": "ğ‘€‹",
    "Tamil": "à®°à¯â€™",
    "ISO": "rÌ¥"
  },
  {
    "Devanagari": "à¥ ",
    "Grantha": "ğ‘ ",
    "Brahmi": "ğ‘€Œ",
    "Tamil": "à®°à¯‚â€™",
    "ISO": "rÌ¥Ì„"
  },
  {
    "Devanagari": "à¤Œ",
    "Grantha": "ğ‘ŒŒ",
    "Brahmi": "ğ‘€",
    "Tamil": "à®²à¯â€™",
    "ISO": "lÌ¥"
  },
  {
    "Devanagari": "à¥¡",
    "Grantha": "ğ‘¡",
    "Brahmi": "ğ‘€",
    "Tamil": "à®²à¯‚â€™",
    "ISO": "lÌ¥Ì„"
  },
  {
    "Devanagari": "à¤",
    "Grantha": "ğ‘Œ…",
    "Brahmi": "ğ‘€…",
    "Tamil": "à®…",
    "ISO": "Ãª"
  },
  {
    "Devanagari": "à¤",
    "Grantha": "ğ‘Œ",
    "Brahmi": "ğ‘€",
    "Tamil": "à®",
    "ISO": "Ä“"
  },
  {
    "Devanagari": "à¤",
    "Grantha": "ğ‘Œ",
    "Brahmi": "ğ‘€",
    "Tamil": "à®",
    "ISO": "e"
  },
  {
    "Devanagari": "à¤",
    "Grantha": "ğ‘Œ",
    "Brahmi": "ğ‘€",
    "Tamil": "à®",
    "ISO": "ai"
  },
  {
    "Devanagari": "à¤‘",
    "Grantha": "ğ‘Œ†",
    "Brahmi": "ğ‘€†",
    "Tamil": "à®†",
    "ISO": "Ã´"
  },
  {
    "Devanagari": "à¤“",
    "Grantha": "ğ‘Œ“",
    "Brahmi": "ğ‘€‘",
    "Tamil": "à®“",
    "ISO": "Å"
  },
  {
    "Devanagari": "à¤’",
    "Grantha": "ğ‘Œ“",
    "Brahmi": "ğ‘€‘",
    "Tamil": "à®’",
    "ISO": "o"
  },
  {
    "Devanagari": "à¤”",
    "Grantha": "ğ‘Œ”",
    "Brahmi": "ğ‘€’",
    "Tamil": "à®”",
    "ISO": "au"
  },
  {
    "Devanagari": "â—Œà¥",
    "Grantha": "â—Œğ‘",
    "Brahmi": "â—Œğ‘†",
    "Tamil": "à¯",
    "ISO": "\b"
  },
  {
    "Devanagari": "â—Œà¤¾",
    "Grantha": "â—Œğ‘Œ¾",
    "Brahmi": "â—Œğ‘€¸",
    "Tamil": "â—Œà®¾",
    "ISO": "\bÄ"
  },
  {
    "Devanagari": "â—Œà¤¿",
    "Grantha": "â—Œğ‘Œ¿",
    "Brahmi": "â—Œğ‘€º",
    "Tamil": "â—Œà®¿",
    "ISO": "\bi"
  },
  {
    "Devanagari": "â—Œà¥€",
    "Grantha": "â—Œğ‘€",
    "Brahmi": "â—Œğ‘€»",
    "Tamil": "â—Œà¯€",
    "ISO": "\bÄ«"
  },
  {
    "Devanagari": "â—Œà¥",
    "Grantha": "â—Œğ‘",
    "Brahmi": "â—Œğ‘€¼",
    "Tamil": "â—Œà¯",
    "ISO": "\bu"
  },
  {
    "Devanagari": "â—Œà¥‚",
    "Grantha": "â—Œğ‘‚",
    "Brahmi": "â—Œğ‘€½",
    "Tamil": "â—Œà¯‚",
    "ISO": "\bÅ«"
  },
  {
    "Devanagari": "â—Œà¥ƒ",
    "Grantha": "â—Œğ‘ƒ",
    "Brahmi": "â—Œğ‘€¾",
    "Tamil": "à¯à®°à¯â€™",
    "ISO": "\brÌ¥"
  },
  {
    "Devanagari": "â—Œà¥„",
    "Grantha": "â—Œğ‘„",
    "Brahmi": "â—Œğ‘€¿",
    "Tamil": "à¯à®°à¯‚â€™",
    "ISO": "\brÌ¥Ì„"
  },
  {
    "Devanagari": "â—Œà¥¢",
    "Grantha": "â—Œğ‘¢",
    "Brahmi": "â—Œğ‘€",
    "Tamil": "à¯à®²à¯â€™",
    "ISO": "\blÌ¥"
  },
  {
    "Devanagari": "â—Œà¥£",
    "Grantha": "â—Œğ‘£",
    "Brahmi": "â—Œğ‘",
    "Tamil": "à¯à®²à¯‚â€™",
    "ISO": "\blÌ¥Ì„"
  },
  {
    "Devanagari": "â—Œà¥…",
    "Grantha": "",
    "Brahmi": "",
    "Tamil": "",
    "ISO": "\bÃª"
  },
  {
    "Devanagari": "â—Œà¥†",
    "Grantha": "â—Œğ‘‡",
    "Brahmi": "â—Œğ‘‚",
    "Tamil": "â—Œà¯†",
    "ISO": "\be"
  },
  {
    "Devanagari": "â—Œà¥‡",
    "Grantha": "â—Œğ‘‡",
    "Brahmi": "â—Œğ‘‚",
    "Tamil": "â—Œà¯‡",
    "ISO": "\bÄ“"
  },
  {
    "Devanagari": "â—Œà¥ˆ",
    "Grantha": "â—Œğ‘ˆ",
    "Brahmi": "â—Œğ‘ƒ",
    "Tamil": "â—Œà¯ˆ",
    "ISO": "\bai"
  },
  {
    "Devanagari": "â—Œà¥‰",
    "Grantha": "â—Œğ‘Œ¾",
    "Brahmi": "â—Œğ‘€¸",
    "Tamil": "â—Œà®¾",
    "ISO": "\bÃ´"
  },
  {
    "Devanagari": "â—Œà¥Š",
    "Grantha": "â—Œğ‘‹",
    "Brahmi": "â—Œğ‘„",
    "Tamil": "â—Œà¯Š",
    "ISO": "\bo"
  },
  {
    "Devanagari": "â—Œà¥‹",
    "Grantha": "â—Œğ‘‹",
    "Brahmi": "â—Œğ‘„",
    "Tamil": "â—Œà¯‹",
    "ISO": "\bÅ"
  },
  {
    "Devanagari": "â—Œà¥Œ",
    "Grantha": "â—Œğ‘Œ",
    "Brahmi": "â—Œğ‘…",
    "Tamil": "â—Œà¯Œ",
    "ISO": "\bau"
  },
  {
    "Devanagari": "à¤•",
    "Grantha": "ğ‘Œ•",
    "Brahmi": "ğ‘€“",
    "Tamil": "à®•",
    "ISO": "ka"
  },
  {
    "Devanagari": "à¤–",
    "Grantha": "ğ‘Œ–",
    "Brahmi": "ğ‘€”",
    "Tamil": "à®•Â²",
    "ISO": "kha"
  },
  {
    "Devanagari": "à¤—",
    "Grantha": "ğ‘Œ—",
    "Brahmi": "ğ‘€•",
    "Tamil": "à®•Â³",
    "ISO": "ga"
  },
  {
    "Devanagari": "à¤˜",
    "Grantha": "ğ‘Œ˜",
    "Brahmi": "ğ‘€–",
    "Tamil": "à®•â´",
    "ISO": "gha"
  },
  {
    "Devanagari": "à¤™",
    "Grantha": "ğ‘Œ™",
    "Brahmi": "ğ‘€—",
    "Tamil": "à®™",
    "ISO": "á¹…a"
  },
  {
    "Devanagari": "à¤š",
    "Grantha": "ğ‘Œš",
    "Brahmi": "ğ‘€˜",
    "Tamil": "à®š",
    "ISO": "ca"
  },
  {
    "Devanagari": "à¤›",
    "Grantha": "ğ‘Œ›",
    "Brahmi": "ğ‘€™",
    "Tamil": "à®šÂ²",
    "ISO": "cha"
  },
  {
    "Devanagari": "à¤œ",
    "Grantha": "ğ‘Œœ",
    "Brahmi": "ğ‘€š",
    "Tamil": "à®œ",
    "ISO": "ja"
  },
  {
    "Devanagari": "à¤",
    "Grantha": "ğ‘Œ",
    "Brahmi": "ğ‘€›",
    "Tamil": "à®œÂ²",
    "ISO": "jha"
  },
  {
    "Devanagari": "à¤",
    "Grantha": "ğ‘Œ",
    "Brahmi": "ğ‘€œ",
    "Tamil": "à®",
    "ISO": "Ã±a"
  },
  {
    "Devanagari": "à¤Ÿ",
    "Grantha": "ğ‘ŒŸ",
    "Brahmi": "ğ‘€",
    "Tamil": "à®Ÿ",
    "ISO": "á¹­a"
  },
  {
    "Devanagari": "à¤ ",
    "Grantha": "ğ‘Œ ",
    "Brahmi": "ğ‘€",
    "Tamil": "à®ŸÂ²",
    "ISO": "á¹­ha"
  },
  {
    "Devanagari": "à¤¡",
    "Grantha": "ğ‘Œ¡",
    "Brahmi": "ğ‘€Ÿ",
    "Tamil": "à®ŸÂ³",
    "ISO": "á¸a"
  },
  {
    "Devanagari": "à¤¢",
    "Grantha": "ğ‘Œ¢",
    "Brahmi": "ğ‘€ ",
    "Tamil": "à®Ÿâ´",
    "ISO": "á¸ha"
  },
  {
    "Devanagari": "à¤£",
    "Grantha": "ğ‘Œ£",
    "Brahmi": "ğ‘€¡",
    "Tamil": "à®£",
    "ISO": "á¹‡a"
  },
  {
    "Devanagari": "à¤¤",
    "Grantha": "ğ‘Œ¤",
    "Brahmi": "ğ‘€¢",
    "Tamil": "à®¤",
    "ISO": "ta"
  },
  {
    "Devanagari": "à¤¥",
    "Grantha": "ğ‘Œ¥",
    "Brahmi": "ğ‘€£",
    "Tamil": "à®¤Â²",
    "ISO": "tha"
  },
  {
    "Devanagari": "à¤¦",
    "Grantha": "ğ‘Œ¦",
    "Brahmi": "ğ‘€¤",
    "Tamil": "à®¤Â³",
    "ISO": "da"
  },
  {
    "Devanagari": "à¤§",
    "Grantha": "ğ‘Œ§",
    "Brahmi": "ğ‘€¥",
    "Tamil": "à®¤â´",
    "ISO": "dha"
  },
  {
    "Devanagari": "à¤¨",
    "Grantha": "ğ‘Œ¨",
    "Brahmi": "ğ‘€¦",
    "Tamil": "à®¨",
    "ISO": "na"
  },
  {
    "Devanagari": "à¤©",
    "Grantha": "ğ‘Œ¨",
    "Brahmi": "ğ‘€·",
    "Tamil": "à®©",
    "ISO": "á¹‰a"
  },
  {
    "Devanagari": "à¤ª",
    "Grantha": "ğ‘Œª",
    "Brahmi": "ğ‘€§",
    "Tamil": "à®ª",
    "ISO": "pa"
  },
  {
    "Devanagari": "à¤«",
    "Grantha": "ğ‘Œ«",
    "Brahmi": "ğ‘€¨",
    "Tamil": "à®ªÂ²",
    "ISO": "pha"
  },
  {
    "Devanagari": "à¤¬",
    "Grantha": "ğ‘Œ¬",
    "Brahmi": "ğ‘€©",
    "Tamil": "à®ªÂ³",
    "ISO": "ba"
  },
  {
    "Devanagari": "à¤­",
    "Grantha": "ğ‘Œ­",
    "Brahmi": "ğ‘€ª",
    "Tamil": "à®ªâ´",
    "ISO": "bha"
  },
  {
    "Devanagari": "à¤®",
    "Grantha": "ğ‘Œ®",
    "Brahmi": "ğ‘€«",
    "Tamil": "à®®",
    "ISO": "ma"
  },
  {
    "Devanagari": "à¤¯",
    "Grantha": "ğ‘Œ¯",
    "Brahmi": "ğ‘€¬",
    "Tamil": "à®¯",
    "ISO": "ya"
  },
  {
    "Devanagari": "à¤°",
    "Grantha": "ğ‘Œ°",
    "Brahmi": "ğ‘€­",
    "Tamil": "à®°",
    "ISO": "ra"
  },
  {
    "Devanagari": "à¤±",
    "Grantha": "ğ‘Œ°ğ‘Œ¼",
    "Brahmi": "ğ‘€¶",
    "Tamil": "à®±",
    "ISO": "á¹Ÿa"
  },
  {
    "Devanagari": "à¤²",
    "Grantha": "ğ‘Œ²",
    "Brahmi": "ğ‘€®",
    "Tamil": "à®²",
    "ISO": "la"
  },
  {
    "Devanagari": "à¤³",
    "Grantha": "ğ‘Œ³",
    "Brahmi": "ğ‘€´",
    "Tamil": "à®³",
    "ISO": "á¸·a"
  },
  {
    "Devanagari": "à¤´",
    "Grantha": "ğ‘Œ³ğ‘Œ¼",
    "Brahmi": "ğ‘€µ",
    "Tamil": "à®´",
    "ISO": "á¸»a"
  },
  {
    "Devanagari": "à¤µ",
    "Grantha": "ğ‘Œµ",
    "Brahmi": "ğ‘€¯",
    "Tamil": "à®µ",
    "ISO": "va"
  },
  {
    "Devanagari": "à¤¶",
    "Grantha": "ğ‘Œ¶",
    "Brahmi": "ğ‘€°",
    "Tamil": "à®¶",
    "ISO": "Å›a"
  },
  {
    "Devanagari": "à¤·",
    "Grantha": "ğ‘Œ·",
    "Brahmi": "ğ‘€±",
    "Tamil": "à®·",
    "ISO": "á¹£a"
  },
  {
    "Devanagari": "à¤¸",
    "Grantha": "ğ‘Œ¸",
    "Brahmi": "ğ‘€²",
    "Tamil": "à®¸",
    "ISO": "sa"
  },
  {
    "Devanagari": "à¤¹",
    "Grantha": "ğ‘Œ¹",
    "Brahmi": "ğ‘€³",
    "Tamil": "à®¹",
    "ISO": "ha"
  },
  {
    "Devanagari": "à¥˜",
    "Grantha": "ğ‘Œ•ğ‘Œ¼",
    "Brahmi": "ğ‘€“",
    "Tamil": "à®ƒà®•",
    "ISO": "qa"
  },
  {
    "Devanagari": "à¥™",
    "Grantha": "ğ‘Œ–ğ‘Œ¼",
    "Brahmi": "ğ‘€”",
    "Tamil": "à®ƒà®•Â²",
    "ISO": "kÍŸha"
  },
  {
    "Devanagari": "à¥š",
    "Grantha": "ğ‘Œ—ğ‘Œ¼",
    "Brahmi": "ğ‘€•",
    "Tamil": "à®ƒà®•Â³",
    "ISO": "Ä¡a"
  },
  {
    "Devanagari": "à¥›",
    "Grantha": "ğ‘Œœğ‘Œ¼",
    "Brahmi": "ğ‘€š",
    "Tamil": "à®ƒà®œ",
    "ISO": "za"
  },
  {
    "Devanagari": "à¥œ",
    "Grantha": "ğ‘Œ¡ğ‘Œ¼",
    "Brahmi": "ğ‘€Ÿ",
    "Tamil": "à®ƒà®ŸÂ²",
    "ISO": "á¹›a"
  },
  {
    "Devanagari": "à¥",
    "Grantha": "ğ‘Œ¢ğ‘Œ¼",
    "Brahmi": "ğ‘€ ",
    "Tamil": "à®ƒà®ŸÂ³",
    "ISO": "á¹›ha"
  },
  {
    "Devanagari": "à¥",
    "Grantha": "ğ‘Œ«ğ‘Œ¼",
    "Brahmi": "ğ‘€¨",
    "Tamil": "à®ƒà®ª",
    "ISO": "fa"
  },
  {
    "Devanagari": "à¤à¤¼",
    "Grantha": "ğ‘Œğ‘Œ¼",
    "Brahmi": "ğ‘€›",
    "Tamil": "à®ƒà®œÂ²",
    "ISO": "Å¾a"
  },
  {
    "Devanagari": "à¥¦",
    "Grantha": "à¯¦",
    "Brahmi": "ğ‘¦",
    "Tamil": "à¯¦",
    "ISO": 0
  },
  {
    "Devanagari": "à¥§",
    "Grantha": "à¯§",
    "Brahmi": "ğ‘§",
    "Tamil": "à¯§",
    "ISO": 1
  },
  {
    "Devanagari": "à¥¨",
    "Grantha": "à¯¨",
    "Brahmi": "ğ‘¨",
    "Tamil": "à¯¨",
    "ISO": 2
  },
  {
    "Devanagari": "à¥©",
    "Grantha": "à¯©",
    "Brahmi": "ğ‘©",
    "Tamil": "à¯©",
    "ISO": 3
  },
  {
    "Devanagari": "à¥ª",
    "Grantha": "à¯ª",
    "Brahmi": "ğ‘ª",
    "Tamil": "à¯ª",
    "ISO": 4
  },
  {
    "Devanagari": "à¥«",
    "Grantha": "à¯«",
    "Brahmi": "ğ‘«",
    "Tamil": "à¯«",
    "ISO": 5
  },
  {
    "Devanagari": "à¥¬",
    "Grantha": "à¯¬",
    "Brahmi": "ğ‘¬",
    "Tamil": "à¯¬",
    "ISO": 6
  },
  {
    "Devanagari": "à¥­",
    "Grantha": "à¯­",
    "Brahmi": "ğ‘­",
    "Tamil": "à¯­",
    "ISO": 7
  },
  {
    "Devanagari": "à¥®",
    "Grantha": "à¯®",
    "Brahmi": "ğ‘®",
    "Tamil": "à¯®",
    "ISO": 8
  },
  {
    "Devanagari": "à¥¯",
    "Grantha": "à¯¯",
    "Brahmi": "ğ‘¯",
    "Tamil": "à¯¯",
    "ISO": 9
  }
];

let ipa_map = [
  {
    "ISO": "mÌ",
    "Sanskrit": "â—ŒÌƒ",
    "Hindi": "â—ŒÌƒ",
    "Tamil": "â—ŒÌƒ"
  },
  {
    "ISO": "mÌ",
    "Sanskrit": "â—ŒÌƒ",
    "Hindi": "â—ŒÌƒ",
    "Tamil": "â—ŒÌƒ"
  },
  {
    "ISO": "á¹",
    "Sanskrit": "â—ŒÌƒ",
    "Hindi": "â—ŒÌƒ",
    "Tamil": "â—ŒÌƒ"
  },
  {
    "ISO": "á¸¥",
    "Sanskrit": "h",
    "Hindi": "h",
    "Tamil": "h"
  },
  {
    "ISO": "a",
    "Sanskrit": "É",
    "Hindi": "É™",
    "Tamil": "a"
  },
  {
    "ISO": "Ä",
    "Sanskrit": "aË",
    "Hindi": "aË",
    "Tamil": "aË"
  },
  {
    "ISO": "i",
    "Sanskrit": "Éª",
    "Hindi": "Éª",
    "Tamil": "i"
  },
  {
    "ISO": "Ä«",
    "Sanskrit": "iË",
    "Hindi": "iË",
    "Tamil": "iË"
  },
  {
    "ISO": "u",
    "Sanskrit": "ÊŠ",
    "Hindi": "ÊŠ",
    "Tamil": "u"
  },
  {
    "ISO": "Å«",
    "Sanskrit": "uË",
    "Hindi": "uË",
    "Tamil": "uË"
  },
  {
    "ISO": "rÌ¥",
    "Sanskrit": "rÌ©",
    "Hindi": "rÌ©",
    "Tamil": "rÌ©"
  },
  {
    "ISO": "lÌ¥",
    "Sanskrit": "lÌ©",
    "Hindi": "lÌ©",
    "Tamil": "lÌ©"
  },
  {
    "ISO": "Ãª",
    "Sanskrit": "Ã¦",
    "Hindi": "Ã¦",
    "Tamil": "Ã¦"
  },
  {
    "ISO": "e",
    "Sanskrit": "e",
    "Hindi": "É›",
    "Tamil": "e"
  },
  {
    "ISO": "Ä“",
    "Sanskrit": "eË",
    "Hindi": "eË",
    "Tamil": "eË"
  },
  {
    "ISO": "ai",
    "Sanskrit": "ÉËiÌ¯",
    "Hindi": "É›Ë",
    "Tamil": "aÉª"
  },
  {
    "ISO": "Ã´",
    "Sanskrit": "É”",
    "Hindi": "É”",
    "Tamil": "É”"
  },
  {
    "ISO": "o",
    "Sanskrit": "o",
    "Hindi": "o",
    "Tamil": "o"
  },
  {
    "ISO": "Å",
    "Sanskrit": "oË",
    "Hindi": "oË",
    "Tamil": "oË"
  },
  {
    "ISO": "au",
    "Sanskrit": "ÉËuÌ¯",
    "Hindi": "É”Ë",
    "Tamil": "aÊŠ"
  },
  {
    "ISO": "k",
    "Sanskrit": "k",
    "Hindi": "k",
    "Tamil": "k"
  },
  {
    "ISO": "kh",
    "Sanskrit": "kÊ°",
    "Hindi": "kÊ°",
    "Tamil": "k"
  },
  {
    "ISO": "g",
    "Sanskrit": "É¡",
    "Hindi": "É¡",
    "Tamil": "k"
  },
  {
    "ISO": "gh",
    "Sanskrit": "É¡Ê±",
    "Hindi": "É¡Ê±",
    "Tamil": "k"
  },
  {
    "ISO": "á¹…",
    "Sanskrit": "Å‹",
    "Hindi": "Å‹",
    "Tamil": "Å‹"
  },
  {
    "ISO": "c",
    "Sanskrit": "tÉ•",
    "Hindi": "tÊƒ",
    "Tamil": "tÉ•"
  },
  {
    "ISO": "ch",
    "Sanskrit": "tÉ•Ê°",
    "Hindi": "tÊƒÊ°",
    "Tamil": "tÉ•"
  },
  {
    "ISO": "j",
    "Sanskrit": "dÊ‘",
    "Hindi": "dÊ’",
    "Tamil": "tÉ•"
  },
  {
    "ISO": "jh",
    "Sanskrit": "dÊ‘Ê±",
    "Hindi": "dÊ’Ê±",
    "Tamil": "tÉ•"
  },
  {
    "ISO": "Ã±",
    "Sanskrit": "É²",
    "Hindi": "É²",
    "Tamil": "É²"
  },
  {
    "ISO": "á¹­",
    "Sanskrit": "Êˆ",
    "Hindi": "Êˆ",
    "Tamil": "Êˆ"
  },
  {
    "ISO": "á¹­h",
    "Sanskrit": "ÊˆÊ°",
    "Hindi": "ÊˆÊ°",
    "Tamil": "Êˆ"
  },
  {
    "ISO": "á¸",
    "Sanskrit": "É–",
    "Hindi": "É–",
    "Tamil": "Êˆ"
  },
  {
    "ISO": "á¸h",
    "Sanskrit": "É–Ê±",
    "Hindi": "É–Ê±",
    "Tamil": "Êˆ"
  },
  {
    "ISO": "á¹‡",
    "Sanskrit": "É³",
    "Hindi": "É³",
    "Tamil": "É³"
  },
  {
    "ISO": "t",
    "Sanskrit": "t",
    "Hindi": "t",
    "Tamil": "t"
  },
  {
    "ISO": "th",
    "Sanskrit": "tÊ°",
    "Hindi": "tÊ°",
    "Tamil": "t"
  },
  {
    "ISO": "d",
    "Sanskrit": "d",
    "Hindi": "d",
    "Tamil": "t"
  },
  {
    "ISO": "dh",
    "Sanskrit": "dÊ±",
    "Hindi": "dÊ±",
    "Tamil": "t"
  },
  {
    "ISO": "n",
    "Sanskrit": "n",
    "Hindi": "n",
    "Tamil": "n"
  },
  {
    "ISO": "á¹‰",
    "Sanskrit": "nÌª",
    "Hindi": "nÌª",
    "Tamil": "nÌª"
  },
  {
    "ISO": "p",
    "Sanskrit": "p",
    "Hindi": "p",
    "Tamil": "p"
  },
  {
    "ISO": "ph",
    "Sanskrit": "pÊ°",
    "Hindi": "pÊ°",
    "Tamil": "p"
  },
  {
    "ISO": "b",
    "Sanskrit": "b",
    "Hindi": "b",
    "Tamil": "p"
  },
  {
    "ISO": "bh",
    "Sanskrit": "bÊ±",
    "Hindi": "bÊ±",
    "Tamil": "p"
  },
  {
    "ISO": "m",
    "Sanskrit": "m",
    "Hindi": "m",
    "Tamil": "m"
  },
  {
    "ISO": "y",
    "Sanskrit": "j",
    "Hindi": "j",
    "Tamil": "j"
  },
  {
    "ISO": "r",
    "Sanskrit": "r",
    "Hindi": "r",
    "Tamil": "É¾"
  },
  {
    "ISO": "á¹Ÿ",
    "Sanskrit": "r",
    "Hindi": "r",
    "Tamil": "r"
  },
  {
    "ISO": "l",
    "Sanskrit": "l",
    "Hindi": "l",
    "Tamil": "l"
  },
  {
    "ISO": "á¸·",
    "Sanskrit": "É­",
    "Hindi": "É­",
    "Tamil": "É­"
  },
  {
    "ISO": "á¸»",
    "Sanskrit": "É»",
    "Hindi": "É»",
    "Tamil": "É»"
  },
  {
    "ISO": "v",
    "Sanskrit": "Ê‹",
    "Hindi": "Ê‹",
    "Tamil": "Ê‹"
  },
  {
    "ISO": "Å›",
    "Sanskrit": "É•",
    "Hindi": "Êƒ",
    "Tamil": "É•"
  },
  {
    "ISO": "á¹£",
    "Sanskrit": "Ê‚",
    "Hindi": "Ê‚",
    "Tamil": "Ê‚"
  },
  {
    "ISO": "s",
    "Sanskrit": "s",
    "Hindi": "s",
    "Tamil": "s"
  },
  {
    "ISO": "h",
    "Sanskrit": "É¦",
    "Hindi": "É¦",
    "Tamil": "É¦"
  },
  {
    "ISO": "'",
    "Sanskrit": "(É)",
    "Hindi": "(É™)",
    "Tamil": "(a)"
  },
  {
    "ISO": "q",
    "Sanskrit": "q",
    "Hindi": "q",
    "Tamil": "q"
  },
  {
    "ISO": "kÍŸh",
    "Sanskrit": "x",
    "Hindi": "x",
    "Tamil": "x"
  },
  {
    "ISO": "Ä¡",
    "Sanskrit": "É£",
    "Hindi": "É£",
    "Tamil": "É£"
  },
  {
    "ISO": "z",
    "Sanskrit": "z",
    "Hindi": "z",
    "Tamil": "z"
  },
  {
    "ISO": "á¹›",
    "Sanskrit": "É½",
    "Hindi": "É½",
    "Tamil": "É½"
  },
  {
    "ISO": "á¹›h",
    "Sanskrit": "É½Ê±",
    "Hindi": "É½Ê±",
    "Tamil": "É½Ê±"
  },
  {
    "ISO": "f",
    "Sanskrit": "f",
    "Hindi": "f",
    "Tamil": "f"
  },
  {
    "ISO": "rÌ¥Ì„",
    "Sanskrit": "rÌ©Ë",
    "Hindi": "rÌ©Ë",
    "Tamil": "rÌ©Ë"
  },
  {
    "ISO": "lÌ¥Ì„",
    "Sanskrit": "lÌ©Ë",
    "Hindi": "lÌ©Ë",
    "Tamil": "lÌ©Ë"
  },
  {
    "ISO": "á¸µ",
    "Sanskrit": "x",
    "Hindi": "x",
    "Tamil": "x"
  },
  {
    "ISO": ".",
    "Sanskrit": ".",
    "Hindi": ".",
    "Tamil": "."
  },
  {
    "ISO": "-",
    "Sanskrit": "-",
    "Hindi": "-",
    "Tamil": "-"
  },
  {
    "ISO": "à¥",
    "Sanskrit": "oá¹ƒ",
    "Hindi": "oá¹ƒ",
    "Tamil": "oá¹ƒ"
  }
];

function fix_string(s) {
  if (!s.replaceAll) return s;
  s = s.normalize();
  return s.replaceAll("â—Œ", "");
}

function fix_iso(s) {
  s = s.normalize();
  return Array.from(s).filter((x, i) => x !== '\b' && s[i+1] !==
    '\b').join("");
}

function unfix_iso(s) {
  s = s.normalize();
  let keys = brahmic_map.map(x => x.ISO);
  let as = Array.from(s);
  let types = as.map((x, i) => {
    // â—Œ
    if (keys.includes(x + "a")) {
      if (as[i + 1] === fix_string("â—ŒÌ¥")) {
        return "V";
      }
      return "C";
    } else if (keys.includes("\b" + x)) {
      return "V";
    } else if (x == "a") {
      return "A";
    } else {
      return "?";
    }
  });
  s = as.flatMap((x, i) => {
    let ty = types[i];
    let p_ty = i > 0 ? types[i-1] : "?";
    let y = i > 0 ? as[i-1] : "\0";
    let z = i < as.length - 1 ? as[i+1] : "\0";
    if (ty === "C") {
      if (x === "h" && keys.includes(y + "ha")) {
        return "";
      }
      if (z === "h" && keys.includes(x + "ha")) {
        x = x + "h";
      }
      if (p_ty === "C") {
        return "\b" + x + "a";
      }
      return x + "a";
    } else if (ty === "V") {
      if (p_ty === "C") {
        return "\b" + x;
      } else {
        return x;
      }
    } else if (ty === "A") {
      if (z === "i" || z === "u") {
        return "\ba";
      }
      if (p_ty === "C") {
        return "";
      }
      return x;
    } else {
      if (p_ty === "C") {
        return "\b" + x;
      } else {
        return x;
      }
    }
  }).join("");
  if (s.length === 0) {
    return "";
  }
  if (s[0] === "\b") {
    s = s.substr(1);
  }
  if (types[types.length - 1] === "C") {
    s += "\b";
  }
  return s;
}

function fix_ipa(s) {
  s = s.normalize();
  return Array.from(s).map((x, i) => (i > 0 && x === s[i-1] && x !== " ") ? "Ë" : x).join("").replaceAll("ËÌƒ", fix_string("â—ŒÌƒË")).replaceAll("nÌªnÌª", "nÌªË");
}

function fix_iso_tamil(s) {
  if (s.length === 0) return "";
  s = s.normalize();
  return fix_iso(s).replaceAll("c", "s").replaceAll("ss", "cc").replaceAll("s s", "c c").replaceAll("Ã±s", "Ã±c");
}

function fix_ipa_tamil(s) {
  s = s.normalize();
  return fix_ipa(s).replaceAll("nËr", "nËdr").replaceAll("nr", "ndr").replaceAll("rË", "tËr");
  // .replaceAll("u ", "É¯ ");
}

function fix_tamil(s) {
  let superscripts = "Â²Â³â´";
  let diacritics = "à¯à®¾à®¿à¯€à¯à¯‚à¯†à¯‡à¯Šà¯‹à¯ˆà¯Œ";
  let chars = Array.from(s);
  let n = s.length;
  for (let i = 0; i < n; i++) {
    let c = chars[i];
    if (superscripts.indexOf(c) !== -1) {
      let d = chars[i + 1];
      if (diacritics.indexOf(d) !== -1) {
        chars[i + 1] = c;
        chars[i] = d;
      }
    }
    if (c === "à®¨" && i > 0) {
      if (chars[i - 1] !== " " && !(chars[i + 1] === "à¥" && "à¤¤à¤¥à¤¦à¤§".indexOf(chars[i + 2]) === -1)) {
        chars[i] = "à®©";
      }
    }
  }
  return chars.join("");
}


function brahmic_convert(s, from, to) {
  if (!from || !to) {
    return s;
  }
  if (from === to) {
    return s;
  }
  s = s.normalize();
  if (from == "ISO") {
    s = unfix_iso(s);
  }
  let set = new Set();
  let entries = brahmic_map.map(x => [fix_string(x[from]), fix_string(x[to])]).filter(([k, v]) => {
    if (set.has(k)) return false;
    set.add(k);
    return true;
  });
  let map = Object.fromEntries(entries);
  let keys = Object.keys(map).filter(x => x.length > 0).sort((x, y) => y.length - x.length);
  keys.forEach(key => {
    s = s.replaceAll(key, map[key]);
  });
  if (to == "ISO") {
    if (from == "Tamil") {
      return fix_iso_tamil(s);
    } else {
      return fix_iso(s);
    }
  }
  if (to == "Tamil") {
    return fix_tamil(s);
  }
  return s;
}

function iso_convert(s, to) {
  if (!to) {
    return s;
  }
  s = s.normalize();
  let from = "ISO";
  let map = Object.fromEntries(ipa_map.map(x => [fix_string(x[from]), fix_string(x[to])]));
  let keys = Object.keys(map).sort((x, y) => y.length - x.length);
  keys.forEach(key => {
    s = s.replaceAll(key, map[key]);
  });
  if (to === "Tamil") {
    return fix_ipa_tamil(s);
  }
  return fix_ipa(s);
}

function transcribe_string(string, from, to) {
  if (to.indexOf("IPA") === 0) {
    return iso_convert(brahmic_convert(string, from, "ISO"), to.substr(4));
  }
  return brahmic_convert(string, from, to);
}

let title = document.title;
let originals = new WeakMap();
function transcribe_node(node, from, to) {
  if (node.nodeType === Node.TEXT_NODE) {
    if (!from) {
      if (originals.has(node)) {
        node.nodeValue = originals.get(node);
      }
    } else {
      originals.set(node, node.nodeValue);
      node.nodeValue = transcribe_string(node.nodeValue, from, to);
    }
  } else if (node.nodeType === Node.ELEMENT_NODE) {
    if (node.lang !== "") return;
    for (let i = 0; i < node.childNodes.length; i++) {
      let child = node.childNodes[i];
      transcribe_node(child, from, to);
    }
  }
}

function transcribe_document(from, to) {
  transcribe_node(document.body, from, to);
  if (from) {
    document.title = transcribe_string(title, from, to);
  } else {
    document.title = title;
  }
}

function reset() {
  transcribe_document(null, null);
}
